<!doctype html>
<html lang="ja">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>新年カウントダウン</title>
	<style>
        @font-face {
    font-family: "MyFont";
    src: url("./BestTen-CRT.otf") format("opentype");
    font-weight: normal;
    font-style: normal;   
    }
        h1{
            text-align: center;
        }
        .countdown{
            display: flex;
            justify-content: center;
            font-size: 220px;
            align-items: center;
            height: 80vh; 
        }
        .num{
            font-family: "MyFont", sans-serif;
        }
        .label{
            font-family: "MyFont", sans-serif;
        }
	</style>
</head>
<body>
	<div class="wrap">
		<div class="card">
			<h1>新年まであと</h1>
			<div id="countdown" class="countdown" aria-live="polite">
				<div id="hours" class="num">00</div><div class="label">:</div>
				<div id="minutes" class="num">00</div><div class="label">:</div>
				<div id="seconds" class="num">00</div><div class="label"></div>
			</div> 

			<div id="message" style="text-align:center; font-size:36px; margin-top:10px;"></div>
			</div>
	</div>

	<script>
		function pad(n){return n.toString().padStart(2,'0')}

		function getNextNewYear(now){
			const year = now.getFullYear();
			// 1月1日 00:00:00 of next calendar year
			return new Date(year + 1, 0, 1, 0, 0, 0);
		}

		function update(){
			const now = new Date();
			const target = getNextNewYear(now);
			const diff = target - now;

			if(diff <= 0){
				document.getElementById('countdown').style.display = 'none';
				const msg = document.getElementById('message');
				msg.textContent = 'あけましておめでとうございます！';
				launchConfetti();
				clearInterval(timer);
				return;
			}

			const sec = Math.floor(diff / 1000) % 60;
			const min = Math.floor(diff / (1000*60)) % 60;
			const hrs = Math.floor(diff / (1000*60*60)) % 24;
			const days = Math.floor(diff / (1000*60*60*24));

			document.getElementById('hours').textContent = pad(hrs);
			document.getElementById('minutes').textContent = pad(min);
			document.getElementById('seconds').textContent = pad(sec);
		}

		// simple confetti (no external libs)
		function launchConfetti(){
			const colors = ['#ff595e','#ffca3a','#8ac926','#1982c4','#6a4c93'];
			const count = 120;
			for(let i=0;i<count;i++){
				const el = document.createElement('div');
				el.className = 'confetti';
				el.style.background = colors[Math.floor(Math.random()*colors.length)];
				el.style.left = Math.random()*100 + '%';
				el.style.top = '-10px';
				el.style.transform = 'rotate(' + (Math.random()*360) + 'deg)';
				el.style.opacity = (0.6 + Math.random()*0.4).toString();
				document.body.appendChild(el);

				const fall = 2000 + Math.random()*3000;
				el.animate([
					{transform: el.style.transform, top: '-10px', opacity: el.style.opacity},
					{transform: 'translateY(' + (window.innerHeight + 200) + 'px) rotate(' + (Math.random()*720) + 'deg)', top: (window.innerHeight + 200) + 'px', opacity: 0.9}
				], {duration: fall, easing: 'cubic-bezier(.2,.7,.3,1)'});

				setTimeout(()=>{ el.remove(); }, fall + 500);
			}
		}

		update();
		const timer = setInterval(update, 1000);
	</script>
</body>
</html>

